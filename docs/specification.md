# サロン機能拡充 機能仕様書

## 1. 概要

### 1.1 目的

シンラボメンバーがサロン内の各種サービスやリソースをより効率的に活用できるよう、サロン機能を段階的に拡充する。メンバーの利便性を向上させ、より快適な学習・活動環境を提供することを目指す。

### 1.2 開発方針

- 段階的な機能拡充
- 各機能は必要最小限の実装からスタート
- ユーザーフィードバックを基に改善・拡張
- 既存システムとの整合性を維持

## 2. 認証機能

### 2.1 機能概要

Clerkを使用したGoogleアカウントでの認証機能を提供し、ログインしたメンバーの情報をSupabaseのデータベースで管理する。

### 2.2 実装方針

1. 認証基盤

   - Clerkを使用したGoogle OAuth認証
   - ログイン後のセッション管理

2. データ管理
   - 初回ログイン時にSupabaseのusersテーブルにメンバー情報を登録
   - 登録情報：
     - clerk_id（Clerkから発行されるID）
     - email（Googleアカウントのメールアドレス）
     - display_name（Googleアカウントの表示名）
     - role（デフォルト：'member'）
     - status（デフォルト：'pending'）

### 2.3 基本機能

1. ログイン

   - Googleアカウントでのログイン
   - 認証情報の保持

2. ログアウト
   - セッションの破棄
   - ログイン画面への遷移

### 2.3 画面遷移

1. 未ログイン時のアクセス

   - 全ての保護されたルートへのアクセスはログイン画面にリダイレクト
   - ログイン成功後は元のアクセス先へリダイレクト

2. ログアウト時
   - ログアウトボタンクリックでセッション破棄
   - ログイン画面へ遷移

### 2.4 認証画面

```
+----------------------------------+
|                                  |
|       シンラボポータルサイト         |
|                                  |
|     [   Googleでログイン   ]       |
|                                  |
+----------------------------------+
```

## 3. 資料一覧ページ

### 3.1 機能概要

シンラボ内の各種資料（申請フォーム、ドキュメント等）への素早いアクセスを可能にする一覧表示機能を提供する。

### 3.2 基本機能

1. サイドバーからの画面遷移

   - サイドバーに「資料一覧」メニューを追加
   - クリックで資料一覧ページ（`/documents`）に遷移

2. 資料一覧の表示

   - カード形式での資料表示
   - 1行3カードのグリッドレイアウト
   - レスポンシブ対応（画面幅に応じてカード数を調整）
   - 資料は「事務局資料」「広報用資料」などの分類別に表示

3. 資料の閲覧
   - カード内の「開く」ボタンをクリック
   - 新タブでGoogleドライブの該当資料を表示

### 3.3 表示項目

各カードには以下の情報を表示：

- 資料名
- 分類タグ
- 説明文（100文字程度）
- 更新日時
- 「開く」ボタン

### 3.4 画面レイアウト

```
+-------------------------------+
|                               |
|  資料一覧                      |
|  事務局資料                     |
|  +------------------------+   |
|  | カード | カード | カード |    |
|  +------------------------+   |
|  | カード | カード | カード |    |
|  +------------------------+   |
|                               |
|  広報用資料                     |
|  +------------------------+   |
|  | カード | カード | カード |    |
|  +------------------------+   |
|                               |
+-------------------------------+
```

### 3.5 カードデザイン

```
+--------------------------+
|  資料名                   |
|                          |
|  説明テキスト              |
|                          |
|              [ 分類タグ ] |
|  更新日: YYYY-MM-DD       |
|  [        開く        ]   |
+--------------------------+
```

## 4. 今後の機能拡充予定

※ 今後、以下のような機能追加を検討する際は、本章以降に各機能の詳細仕様を追加していく。

- メンバー承認機能
- 動画一覧ページ
- その他、メンバーからの要望に基づく機能
